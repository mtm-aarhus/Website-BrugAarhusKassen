{% extends "udeservering.html" %}

{% block content %}

<h4 class="mb-3">Udeservering – Ansøgninger</h4>

<div id="toolbar">
  <select id="filterSelect" class="form-select form-select-sm" style="width: 200px;">
    <option value="aktive" selected>Aktive</option>
    <option value="inaktive">Inaktive</option>
    <option value="alle">Alle</option>
  </select>
</div>
<div class="table-responsive">
  <table id="applications-table"
    class="table table-striped table-bordered align-middle"
    data-toolbar="#toolbar"
    data-toggle="table"
    data-pagination="true"
    data-side-pagination="server"
    data-search="true"
    data-url="{{ url_for('udeservering.api_udeservering_applications') }}"
    data-page-size="25"
    data-sort-name="Id"
    data-sort-order="desc"
    data-unique-id="Id"
    data-total-field="total"
    data-data-field="rows">
<thead>
  <tr>
    <th data-field="Id" data-formatter="linkFormatter" data-sortable="true">ID</th>
    <th data-field="Firmanavn" data-sortable="true">Firmanavn</th>
    <th data-field="Adresse" data-sortable="true">Adresse</th>
    <th data-field="CVR" data-sortable="true">CVR</th>
    <th data-field="Serveringszone" data-sortable="true">Zone</th>
    <th data-field="Lokation" data-sortable="true">Lokation</th>
    <th data-field="Serveringsareal" data-sortable="true" data-formatter="arealFormatter">Areal</th>
    <th data-field="Facadelaengde" data-sortable="true" data-formatter="facadeFormatter">Facade</th>

    <th data-field="GaeldendeFra" data-sortable="true" data-formatter="dateFormatter">Gældende fra</th>
    <th data-field="GaeldendeTilOgMed" data-sortable="true" data-formatter="dateFormatter">Gældende til</th>

    <th data-field="MaanederJson" data-formatter="monthsOptionFormatter">Måneder</th>

    <th data-field="ArealVarierer" data-sortable="true" data-formatter="boolFormatter">Areal varierer</th>
    <th data-field="Ansogningsdato" data-sortable="true" data-formatter="dateFormatter">Ansøgningsdato</th>
  </tr>
</thead>
  </table>
</div>
{% endblock %}

{% block extra_js %}
{{ super() }}
<script>

  $("#filterSelect").on("change", function() {
    const filter = $(this).val();
    const url = "{{ url_for('udeservering.api_udeservering_applications') }}" + "?filter=" + filter;

    $("#applications-table").bootstrapTable("refresh", { url: url });
  });


</script>
{% endblock %}
